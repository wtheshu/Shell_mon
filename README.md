# 项目介绍

使用Shell脚本的方式，制定各种个性化警告工具，统一化、规范化地来进行管理。

我们的机器角色多种多样，但是所有的机器上都要部署同样的监控系统，也就是说，所有的机器不管什么角色，整个程序框架都是一致的，不同的地方在于根据不同的角色，定制不同的配置文件。


# 程序架构

程序架构如下：
```
                        主目录mon
                            |
   -------------------------------------------------------------
   |          |             |                 |                |
  bin        conf         shares             mail             log
   |          |             |                 |                |
main.sh    mon.conf   load.sh,502.sh   mail.php,mail.sh     mon.log,err.log
```

- bin下是主程序，作为整个脚本的入口，是整个系统的命脉。
- conf下是配置文件，作为整个监控系统的控制中心，通过它来开关各个子程序，制定各个相关联的日志文件。
- shares下各种监控脚本，这个里面的脚本用来监控各个指标。
- mail下是邮件引擎，它是有PHP实现的，它可以定义发邮件的服务器、发邮件人以及收邮件人。
- log下是日志，它是整个监控系统的日志输出。


# 使用方法

mail.php中需要更改成自己的参数。该脚本中需要改动的是：
- `$smtpserver`修改成自己所用的SMTP服务器
- `$smtpusermail`定义发邮件的用户信箱
- `$smtpmailto`定义接受邮件的信箱
- `$smtpuser`定义用户名
- `$smtppass`定义用户密码
- 其中：
  - `$mailsubject`为第一个参数，定义邮件主题
  - `$mailbody`定义邮件内容的文本
  - `$file`为第二个参数
- 发送邮件需要PHP的支持，如果机器上安装了PHP，则用下面的命令来实现发送邮件的功能：
  - `php mail.php "邮箱主题" "/tmp/test.txt"`
  - 其中`/tmp/test.txt`为邮件内容


